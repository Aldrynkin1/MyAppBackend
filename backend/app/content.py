INITIAL_STATE = {
    'is_dirty': True,
    'vibe': 0,
    'time': 480,
    'hungry': 50,
    'money': 500,
    'current_scene': 'start'
}

SCENES = {
    'start': {
        'text': '–¢—ã –ø—Ä–æ—Å–Ω—É–ª—Å—è.',
        'conditions': [{
            'check': lambda state: state['time'] > 540,
            'text': '–û–ø–∞–∑–¥—ã–≤–∞–µ—à—å –Ω–∞ —Ä–∞–±–æ—Ç—É. –ü–æ—Ä–∞ –≤—Å—Ç–∞–≤–∞—Ç—å',
        }],
        'random_events': [{
            'chance': 0,
            'text': '',
            'effects': {}
        }],
        'choices': [
            {'text': '–û—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–∑–∞', 'next': 'your_room', 'effects': {'is_dirty': True, 'vibe': 0, 'time': 0, 'hungry': 0, 'money': 500}},
            {'text': '–°–ø–∞—Ç—å –¥–∞–ª—å—à–µ', 'next': 'start', 'effects': {'vibe': 5, 'time': 90, 'hungry': 5}},
        ],
    },
    
    'your_room': {
        'text': '–¢—ã –≤ —Å–≤–æ–µ–π –∫–æ–º–Ω–∞—Ç–µ. –¢–µ–±–µ —Ç—É—Ç –≤—Å–µ —Ç–∞–∫ –ø—Ä–∏–µ–ª–æ—Å—å.',
        'choices': [
            {'text': '–ü–æ–π—Ç–∏ —É–º—ã—Ç—å—Å—è', 'next': 'bathroom', 'effects': {'vibe': 1, 'time': 5, 'hungry': 1}},
            {'text': '–ü–æ–π—Ç–∏ –ø–æ–∑–∞–≤—Ç—Ä–∞–∫–∞—Ç—å', 'next': 'kitchen', 'effects': {'vibe': 0, 'time': 1, 'hungry': 0}}
        ],
    },
    
    'bathroom': {
        'text': '–¢—ã –≤ –≤–∞–Ω–Ω–æ–π. –ü–æ—Å–ª–µ —É–º—ã–≤–∞–Ω–∏—è —Ç–≤–æ–µ –∑–µ—Ä–∫–∞–ª–æ –∑–∞–ø–æ—Ç–µ–ª–æ, –Ω–æ —Ç–µ–±—è —ç—Ç–æ –Ω–µ –≤–æ–ª–Ω—É–µ—Ç',
        'choices': [
            {'text': '–£–º—ã—Ç—å—Å—è', 'next': 'mirror', 'effects': {'is_dirty': False, 'vibe': 10, 'time': 5, 'hungry': 1}},
        ],
    },
    
    'mirror': {
        'text': '–í—Ä–æ–¥–µ –±—ã —Å–µ–≥–æ–¥–Ω—è –≤—ã–≥–ª—è–∂—É –Ω–µ–ø–ª–æ—Ö–æ...',
        'choices': [
            {'text': '–ü–æ—Ä–∞ –±—ã –ø–æ–∑–∞–≤—Ç—Ä–∞–∫–∞—Ç—å', 'next': 'kitchen', 'effects': {'vibe': 5, 'time': 1, 'hungry': 1}},
        ],
    },
    
    'kitchen': {
        'text': '–¢—ã –Ω–∞ –∫—É—Ö–Ω–µ. –ü–∞—Ö–Ω–µ—Ç —Å—Ç–∞—Ä—ã–º –∫–æ—Ñ–µ... —á—Ç–æ —Å—ä–µ—à—å –Ω–∞ –∑–∞–≤—Ç—Ä–∞–∫?',
        'choices': [
            {'text': '–Ø –Ω–µ –≥–æ–ª–æ–¥–µ–Ω', 'next': 'now_room', 'effects': {'hungry': 10, 'vibe': -5}},
            {'text': '–î–æ—à–∏—Ä–∞–∫', 'next': 'now_room', 'effects': {'hungry': -10, 'time': 15}},
            {'text': '–¢–≤–æ—Ä–æ–≥ —Å –º–æ–ª–æ–∫–æ–º', 'next': 'now_room', 'effects': {'hungry': -20, 'time': 10}},
        ],
    },
    
    'now_room': {
        'text': '–ü–æ—Ä–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É...',
        'conditions': [
            {'check': lambda state: state['is_dirty'] == True, 'text': '–¢—ã –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ –æ—Ç —Ç–µ–±—è –ø–∞—Ö–Ω–µ—Ç... –°–æ—Å–µ–¥–∏ –≤ –ª–∏—Ñ—Ç–µ –±—É–¥—É—Ç –Ω–µ–¥–æ–≤–æ–ª—å–Ω—ã.'},
            {'check': lambda state: state['hungry'] > 70, 'text': '–¢–≤–æ–π –∂–∏–≤–æ—Ç —É—Ä—á–∏—Ç —Ç–∞–∫, —á—Ç–æ —Ç—ã –Ω–µ –º–æ–∂–µ—à—å —ç—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å'},
            {'check': lambda state: state['time'] > 540, 'text': '–¢—ã –æ–ø–∞–∑–¥—ã–≤–∞–µ—à—å... –ü–æ—Ä–∞ –ø—Ä–∏–¥—É–º–∞—Ç—å –æ—Ç–º–∞–∑–∫—É.'},
        ],
        'choices': [
            {'text': '–û–¥–µ—Ç—å—Å—è', 'next': 'hall', 'effects': {'vibe': -5, 'time': 5}},
            {'text': '–°–∫–∞–∑–∞—Ç—å –±–æ—Å—Å—É, —á—Ç–æ –∑–∞–±–æ–ª–µ–ª', 'next': 'start', 'effects': {'vibe': 5, 'time': 1200, 'hungry': 30, 'is_dirty': True}},
        ],
    },
    
    'hall': {
        'text': '–¢—ã –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ.',
        'conditions': [
            {'check': lambda state: state['vibe'] < 10, 'text': '–î–∞ —É–∂... –£—Ç—Ä–æ –∫–∞–∫-—Ç–æ –Ω–µ –∑–∞–¥–∞–ª–æ—Å—å.'},
            {'check': lambda state: state['hungry'] > 70, 'text': '–ï—â–µ –∏ –≥–æ–ª–æ–¥–Ω—ã–π –∫–∞–∫ –Ω–µ –∑–Ω–∞—é –∫—Ç–æ... –õ–∞–¥–Ω–æ, –ø–æ –ø—É—Ç–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –ø—Ä–∏—Ö–≤–∞—á—É.'},
        ],
        'random_events': [{
            'chance': 0.2,
            'text': '–£ –≤–∞—Å –∑–∞–±–æ–ª–µ–ª–∞ –≥–æ–ª–æ–≤–∞',
            'effects': {'vibe': -5},
        }],
        'choices': [
            {'text': '–í—ã–π—Ç–∏ –∏–∑ –¥–æ–º–∞', 'next': 'lift', 'effects': {'vibe': -1, 'time': 5}},
        ],
    },
    
    'lift': {
        'text': '–¢—ã –≤ –ª–∏—Ñ—Ç–µ.',
        'conditions': [
            {'check': lambda state: state['vibe'] < 10, 'text': '–°–æ—Å–µ–¥–∏ –≤–∏–¥—è—Ç, —á—Ç–æ —É —Ç–µ–±—è –ø–ª–æ—Ö–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ.'},
            {'check': lambda state: state['is_dirty'] == True, 'text': '–°–æ—Å–µ–¥–∏ –ø—Ä–∏–∫—Ä—ã–ª–∏ –Ω–æ—Å—ã –æ—Ç —Ç–≤–æ–µ–≥–æ –∑–∞–ø–∞—Ö–∞. –¢–µ–±–µ —Å—Ç–∞–ª–æ —Å—Ç—ã–¥–Ω–æ.'},
            {'check': lambda state: state['time'] >= 540, 'text': '–¢—ã –≤ —É–∂–∞—Å–Ω–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏, –≤–µ–¥—å, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ, —Ç—ã –µ—â–µ –∏ –æ–ø–∞–∑–¥—ã–≤–∞–µ—à—å.'},
        ],
        'choices': [
            {'text': '–¢—ã –≤—ã—Ö–æ–¥–∏—à—å –Ω–∞ —É–ª–∏—Ü—É', 'next': 'street', 'effects': {'vibe': -1, 'time': 2}},
        ],
    },
    
    'street': {
        'text': '–í—ã –∏–¥–µ—Ç–µ –Ω–∞ —Ä–∞–±–æ—Ç—É, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–Ω–∞–≤–∏–¥–∏—Ç–µ.',
        'conditions': [
            {'check': lambda state: state['hungry'] > 70, 'text': '–ù–∞–¥–æ –±—ã –∑–∞–π—Ç–∏ –∫—É–ø–∏—Ç—å —Å–µ–±–µ –ø–µ—Ä–µ–∫—É—Å–∏—Ç—å.'},
        ],
        'random_events': [{
            'chance': 0.1,
            'text': '–í—ã –ø–æ–¥–≤–µ—Ä–Ω—É–ª–∏ –Ω–æ–≥—É. –í–ø—Ä–µ–¥—å –±—É–¥—å—Ç–µ –∞–∫–∫—É—Ä–∞—Ç–Ω–µ–µ.',
            'effects': {'vibe': -5, 'time': 5}
        }],
        'choices': [
            {'text': '–ó–∞–π—Ç–∏ –≤ –º–∞–≥–∞–∑–∏–Ω.', 'next': 'shop', 'effects': {'time': 5}},
            {'text': '–ò–¥—Ç–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É –≥–æ–ª–æ–¥–Ω—ã–º', 'next': 'job', 'effects': {'hungry': 5, 'vibe': -5}}
        ],
    },
    'shop': {
        'text': '–í—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ "24/7". –ü–æ–ª–∫–∏ –ø–æ–ª—É–ø—É—Å—Ç—ã–µ.',
        'choices': [
            {'text': '–ö—É–ø–∏—Ç—å –±—É–ª–∫—É (30‚ÇΩ)', 'next': 'street', 'effects': {'money': -30, 'hungry': -20, 'time': 10}},
            {'text': '–ö—É–ø–∏—Ç—å –≤–æ–¥—É (20‚ÇΩ)', 'next': 'street', 'effects': {'money': -20, 'vibe': 5, 'time': 5}},
            {'text': '–£–π—Ç–∏ –±–µ–∑ –ø–æ–∫—É–ø–æ–∫', 'next': 'street', 'effects': {'time': 2}},
        ],
    },
    
    'death_hunger': {
        'text': 'üíÄ –í–ê–® –û–†–ì–ê–ù–ò–ó–ú –ù–ï –í–´–î–ï–†–ñ–ê–õ. –ì–û–õ–û–î –°–™–ï–õ –í–ê–° –ò–ó–ù–£–¢–†–ò.\n\n–í—ã —É–º–µ—Ä–ª–∏ –æ—Ç –∏—Å—Ç–æ—â–µ–Ω–∏—è. –í–æ–∑–º–æ–∂–Ω–æ, –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —Å—Ç–æ–∏—Ç –µ—Å—Ç—å.',
        'choices': [
            {'text': '–ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û', 'next': 'start', 'effects': INITIAL_STATE},
        ],
    },
    
    'death_time': {
        'text': '‚è∞ –í–†–ï–ú–Ø –í–´–®–õ–û. –í–´ –ü–†–û–°–ò–î–ï–õ–ò –í–°–Æ –ù–û–ß–¨ –ù–ê –†–ê–ë–û–¢–ï.\n\n–°–µ—Ä–¥—Ü–µ –Ω–µ –≤—ã–¥–µ—Ä–∂–∞–ª–æ –ø–µ—Ä–µ—É—Ç–æ–º–ª–µ–Ω–∏—è. –í—ã —É–º–µ—Ä–ª–∏ –æ—Ç —Å–µ—Ä–¥–µ—á–Ω–æ–≥–æ –ø—Ä–∏—Å—Ç—É–ø–∞.',
        'choices': [
            {'text': '–ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û', 'next': 'start', 'effects': INITIAL_STATE},
        ],
    },
    
    'death_unemployed': {
        'text': 'üí∏ –í–´ –û–°–¢–ê–õ–ò–°–¨ –ë–ï–ó –†–ê–ë–û–¢–´ –ò –î–ï–ù–ï–ì.\n\n–ß–µ—Ä–µ–∑ –º–µ—Å—è—Ü –≤–∞—Å –≤—ã—Å–µ–ª–∏–ª–∏ –∏–∑ –∫–≤–∞—Ä—Ç–∏—Ä—ã. –í—ã —É–º–µ—Ä–ª–∏ –æ—Ç —Ö–æ–ª–æ–¥–∞ –Ω–∞ —É–ª–∏—Ü–µ.',
        'choices': [
            {'text': '–ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û', 'next': 'start', 'effects': INITIAL_STATE},
        ],
    },
    
    'existential_crisis': {
        'text': 'ü§î –ó–ê–ß–ï–ú –í–°–Å –≠–¢–û? –†–ê–ë–û–¢–ê, –î–ï–ù–¨–ì–ò, –°–£–ï–¢–ê...\n\n–í—ã –æ—Å–æ–∑–Ω–∞–ª–∏ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è. –≠—Ç–æ –∫–æ–Ω–µ—Ü?',
        'choices': [
            {'text': '–ü–†–û–î–û–õ–ñ–ò–¢–¨ –ñ–ò–¢–¨', 'next': 'your_room_evening', 'effects': {'vibe': 50}},
            {'text': '–°–î–ê–ò–¢–¨–°–Ø', 'next': 'death_depression', 'effects': {}},
        ],
    },
    
    'death_depression': {
        'text': '‚òÅÔ∏è –í–´ –ü–û–î–î–ê–õ–ò–°–¨ –¢–û–°–ö–ï. –ú–ò–† –ü–û–ì–õ–û–¢–ò–õ–ê –ü–£–°–¢–û–¢–ê.\n\n–î–µ–ø—Ä–µ—Å—Å–∏—è —Å—ä–µ–ª–∞ –≤–∞—Å –∑–∞–∂–∏–≤–æ. –í—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å.',
        'choices': [
            {'text': '–ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û', 'next': 'start', 'effects': INITIAL_STATE},
        ],
    },
    
    'park': {
        'text': '–í—ã –≤ –ø–∞—Ä–∫–µ. –¢–∏—à–∏–Ω–∞, —Ç–æ–ª—å–∫–æ —à–µ–ª–µ—Å—Ç –ª–∏—Å—Ç—å–µ–≤.',
        'conditions': [
            {'check': lambda state: state['vibe'] < 10, 'text': '–ü—Ä–∏—Ä–æ–¥–∞ –Ω–µ –ø—Ä–∏–Ω–æ—Å–∏—Ç —É—Å–ø–æ–∫–æ–µ–Ω–∏—è.'},
        ],
        'random_events': [{
            'chance': 0.05,
            'text': '–í—ã –Ω–∞—à–ª–∏ 100‚ÇΩ –Ω–∞ —Å–∫–∞–º–µ–π–∫–µ!',
            'effects': {'money': 100, 'vibe': 5},
        }],
        'choices': [
            {'text': '–ü–æ—Å–∏–¥–µ—Ç—å –Ω–∞ —Å–∫–∞–º–µ–π–∫–µ', 'next': 'your_room_evening', 'effects': {'time': 30, 'vibe': 5}},
            {'text': '–ü–æ–∫–æ—Ä–º–∏—Ç—å –≥–æ–ª—É–±–µ–π', 'next': 'park', 'effects': {'vibe': 2, 'time': 15}},
            {'text': '–í–µ—Ä–Ω—É—Ç—å—Å—è –¥–æ–º–æ–π', 'next': 'your_room_evening', 'effects': {'time': 20}},
        ],
    },
    
    'bar': {
        'text': '–ë–∞—Ä "–£—Ç–æ–ø–ª–µ–Ω–Ω–∏–∫". –ó–∞–ø–∞—Ö –ø–∏–≤–∞ –∏ –æ—Ç—á–∞—è–Ω–∏—è.',
        'conditions': [
            {'check': lambda state: state['money'] < 50, 'text': '–£ –≤–∞—Å –ø–æ—á—Ç–∏ –Ω–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ –≤—ã–ø–∏–≤–∫—É.'},
        ],
        'choices': [
            {'text': '–í—ã–ø–∏—Ç—å –ø–∏–≤–æ (50‚ÇΩ)', 'next': 'your_room_evening', 'effects': {'money': -50, 'vibe': 10, 'hungry': 5, 'time': 60}},
            {'text': '–í—ã–ø–∏—Ç—å –≤–∏—Å–∫–∏ (150‚ÇΩ)', 'next': 'your_room_evening', 'effects': {'money': -150, 'vibe': 20, 'time': 90, 'is_dirty': True}},
            {'text': '–£–π—Ç–∏', 'next': 'evening_street', 'effects': {'time': 5}},
        ],
    },
}

